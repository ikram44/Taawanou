<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>اختبار تجويد تفاعلي 🎀</title>
<style>
body {
  font-family: Arial, sans-serif;
  direction: rtl;
  margin: 20px;
  background: linear-gradient(to bottom right, #ffe6f2, #fff0f8);
  animation: bgMove 10s infinite alternate;
  overflow-x: hidden;
}

@keyframes bgMove {
  from { background-position: 0 0; }
  to { background-position: 100% 100%; }
}

h1, h2 { text-align: center; color: #c2185b; }

.question {
  margin-bottom: 25px;
  padding: 15px;
  border: 2px solid #f48fb1;
  border-radius: 15px;
  background-color: #fffafc;
  position: relative;
  overflow: hidden;
  box-shadow: 0 0 10px #f8bbd0;
}

.options button {
  display: block;
  margin: 5px 0;
  padding: 10px;
  width: 100%;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-size: 16px;
  transition: transform 0.2s, background-color 0.3s;
}

.options button:hover { transform: scale(1.05); }

.correct { background-color: #81c784; color: white; }
.wrong { background-color: #e57373; color: white; }

.feedback {
  margin-top: 10px;
  font-weight: bold;
  font-size: 18px;
  text-align: center;
}

.firework, .fallingGifts, .angryEmoji {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0; left: 0;
  pointer-events: none;
  overflow: hidden;
}

/* 🎁 Animation des cadeaux */
.gift {
  position: absolute;
  top: -50px;
  font-size: 30px;
  animation: fall 2s linear forwards;
}

@keyframes fall {
  0% { transform: translateY(0) rotate(0); opacity: 1; }
  100% { transform: translateY(600px) rotate(360deg); opacity: 0; }
}

/* 😡 Animation “fâchée” */
.angry {
  position: absolute;
  font-size: 40px;
  animation: bounce 1s ease-in-out infinite alternate;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
}

@keyframes bounce {
  from { transform: translate(-50%, 0) rotate(0deg); }
  to { transform: translate(-50%, -20px) rotate(10deg); }
}

#result {
  text-align: center;
  font-size: 22px;
  font-weight: bold;
  color: #d81b60;
  margin-top: 30px;
}

#quizContainer { display:none; }
</style>
</head>
<body>

<h1>🎀 اختبار تجويد تفاعلي ممتع 🎀</h1>
<h2>إعداد: إكرام خليف – طالبات وتعاونوا</h2>

<div id="startContainer" style="text-align:center;">
  <label>الاسم / Nom: <input type="text" id="studentName"></label><br><br>
  <button onclick="startQuiz()">ابدأ الاختبار / Commencer le quiz</button>
</div>

<div id="quizContainer"></div>

<div id="result"></div>

<audio id="correctSound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
<audio id="wrongSound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

<script>
const questions = [
  { text: "الحكم التجويدي في قوله تعالى: 'عليمٌ حكيم'", options: ["إدغام بغنة", "إظهار حقيقي"], correct: 1 },
  { text: "الحكم التجويدي في قوله تعالى: 'من يعمل'", options: ["إدغام بدون غنة", "إظهار حقيقي"], correct: 0 }
];

let currentQuestion = 0;
let score = 0;
let studentAnswers = [];
let studentName = "";

function startQuiz() {
  studentName = document.getElementById('studentName').value.trim();
  if(studentName === "") { alert("يرجى إدخال الاسم / Veuillez entrer votre nom"); return; }
  document.getElementById('startContainer').style.display = "none";
  document.getElementById('quizContainer').style.display = "block";
  showQuestion();
}

function showQuestion() {
  if(currentQuestion >= questions.length){
    showResult();
    return;
  }
  const q = questions[currentQuestion];
  const quizDiv = document.getElementById('quizContainer');
  let html = `<div class="question"><p><strong>السؤال ${currentQuestion+1}:</strong> ${q.text}</p><div class="options">`;
  q.options.forEach((opt, index)=>{
    html += `<button onclick="checkAnswer(this, ${index === q.correct})">${opt}</button>`;
  });
  html += `</div><div class="feedback"></div><div class="fallingGifts"></div><div class="angryEmoji"></div></div>`;
  quizDiv.innerHTML = html;
}

function checkAnswer(button, correct) {
  const q = questions[currentQuestion];
  const feedback = button.parentElement.nextElementSibling;
  const giftDiv = button.parentElement.nextElementSibling.nextElementSibling;
  const angryDiv = giftDiv.nextElementSibling;
  const correctSound = document.getElementById('correctSound');
  const wrongSound = document.getElementById('wrongSound');

  if(correct){
    button.classList.add('correct');
    feedback.textContent = "🎉 أحسنت! إجابة صحيحة!";
    correctSound.play();
    score++;
    // 🎁 Animation des cadeaux
    for(let i=0;i<10;i++){
      const gift = document.createElement('div');
      gift.classList.add('gift');
      gift.style.left = Math.random()*90 + "%";
      gift.textContent = "🎁";
      giftDiv.appendChild(gift);
      setTimeout(()=>gift.remove(), 2000);
    }
  } else {
    button.classList.add('wrong');
    feedback.textContent = "😡 إجابة خاطئة! حاول مرة أخرى!";
    wrongSound.play();
    // 😡 Animation rigolote
    const angry = document.createElement('div');
    angry.classList.add('angry');
    angry.textContent = "😡😡😡";
    angryDiv.appendChild(angry);
    setTimeout(()=>angry.remove(), 1500);
  }

  const buttons = button.parentElement.querySelectorAll('button');
  buttons.forEach(b => b.disabled = true);

  setTimeout(()=>{
    currentQuestion++;
    showQuestion();
  }, 2000);
}

function showResult() {
  document.getElementById('quizContainer').style.display = "none";
  let resultDiv = document.getElementById('result');
  resultDiv.innerHTML = `<h3>🏆 النتيجة النهائية للطالبة ${studentName} :</h3>
    <p>عدد الإجابات الصحيحة: ${score} من ${questions.length}</p>`;
}
</script>

</body>
</html>
